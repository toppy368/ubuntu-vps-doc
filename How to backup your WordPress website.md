# 如何備份 WordPress 網站與備份的注意事項

這份文件是簡報的草稿，可以當成簡報大綱(主架構)的資料來源。

## 自我介紹


## 為什麼網站需要備份

    作者提示：這兩張圖需要說明狡兔有三窟的原因，同時需要檢查是否為CC0授權的圖檔或新聞圖檔 (註：CC0等於公共領域，至於新聞則是因為單純描述新聞內容不受著作權保護)

第一章圖片可用素材：
https://zh.wikipedia.org/wiki/File:Impact_event.jpg

第二張圖片可用素材：  
https://en.wikipedia.org/wiki/File:Wana_Decrypt0r_screenshot.png

> 授權條款說明：維基百科的授權條款都放在網址內文中，本簡報均採用公共領域或可免費商業使用的圖檔，以避免著作權侵權爭議。

## 為什麼網站需要備份 - 結論

第三張圖片可用素材：
https://www.pexels.com/photo/crop-man-sealing-cardboard-box-with-tape-4506249/

> 授權條款說明：https://www.pexels.com/license/

結論：防範(意外)於未然，狡兔有三窟！  

無論主機商、網站程式升級 (WordPress 主程式或套件升級發生意外)、或發生資安事故時，網站本身若有備份，可以先救回資料再並進行補救措施。  

若要客製化/對WordPress做不可預期的操作(例如：更改ＷordPress程式碼、手動操作資料庫等)，也必須備份以避免發生意外。  

平時也可整理網站所需要的內容，當成網站的緊急救難包/打包後的行李，未來當主機發生意外或需要搬家時 (例如主機商倒閉) ，可以將網站搬移至其他主機商。


## 備份網站的注意事項 - 圖檔素材

圖檔素材：https://www.irasutoya.com/2015/06/blog-post_344.html?m=1

> 授權條款說明：https://www.irasutoya.com/p/terms.html

## 備份網站的注意事項 - WordPress 成份說明

> 編輯備註：已與簡報同步

* WordPress 程式相關
    * ~~主程式~~ (因官網有此檔案，所以不需備份，但需知道網站正在運作的WordPress版本為多少)
    * 佈景主題 （路徑：`/<你的 WordPress 網站目錄>/wp-content/themes`）
    * 套件 （路徑：`/<你的 WordPress 網站目錄>/wp-content/plugins`）
    * 媒體庫 （路徑：`/<你的 WordPress 網站目錄>wp-content/uploads/`）
    * wp-config.php (WordPress 設定擋)
    * 其他套件設定 （例如Google網站工具的檔案、套件的API KEY與密碼等）
    * 匯出功能 XML 檔 （若有備份SQL可不需 XML 檔，可備份基本的文章、留言、自訂欄位、分類及標籤）

如果忘記套件/模板與媒體庫放在哪裏（或懶得記路徑），可直接備份 WordPress 網站目錄的 wp-content 資料夾(套件/模板/媒體庫都在裡面）。

* 資料庫
    * 請記得資料庫名稱 (WordPress的config.php會記錄名稱與帳號密碼) 
    * WordPress的文章與套件設定都在資料庫裡面

* 主機設定
    * 虛擬主機服務商的開通信件 （主機商後台連結會附在信件內）
    * 連接VPS或遠端主機的SSH KEY
    * https 憑證 （簽署與購買憑證的過程中會產生憑證檔案，若採用 Let’s Encrypt 或 CloudFlare 的憑證，因為可重新申請與產生憑證，所以不需備份）


## 網站備份的注意事項 - 站長操作備份的原則

* 需了解自己的ＷordPress是如何安裝的（主機環境與設定主機，若虛擬主機會簡化一部分設定），同時也需要自行安裝的能力，如此才能還原備份出來的檔案。

* 延續上一項目，若了幾自己的ＷordPress的運作環境，可以根據主機類型（虛擬主機或VPS等主機）選擇使用FTP/SFTP或Linux指令或其他檔案存取方式來備份檔案。

* 需瞭解ＷordPress的組成，上一章節已說過文章、套件、模板大致的位置，若選擇採用套件備份也需要了解該套件備份的內容是否包含這些項目，避免資料遺失。

* 因為不知意外何時發生，最好定期備份，且保留最新備份檔（備註：我的習慣是每天一備份且雲端保留一週，自己電腦硬碟保留一個月），如果是商業網站且能力資金許可，也可考慮異地備份甚至考慮高可用性架構 （High availability）。


## 備份方式解說 (會睡著建議簡單帶過或省略)
> 編輯備註：編輯簡報時請區分簡介與詳解的內容，此段可視情況刪減

### 虛擬主機備份法
本次只講解資料庫的備份方法，檔案備份請利用FTP工具或虛擬主機商提供的後臺進行備份。  
虛擬主機通常會給你cPlane等網站管理後臺，這些後臺通常也有檔案備份工具，因為各主機商提供的面板有差異，詳情請利用線上客服或客服表單詢問。

#### 利用 phpMyAdmin 備份 WordPress 的 SQL 資料庫
> 編輯備註：請在此張貼 phpMyAdmin 的備份資料庫操作

### VPS 雲端主機備份法
> 編輯備註：
> 1. 請家需要備份那些內容的細部項目與路徑直接移動過來
> 2. 可用 rsync 語法快速搬移目錄到自己的電腦

## 自動備份：UpdraftPlus 備份套件展示 (Demo時間)
官方下載網址：https://wordpress.org/plugins/updraftplus/
